<body id=b>
<script>
for(n=(n=>{for(V=d.value,u=o.checked,v=[],p=c=0,b=((n,i,e,t)=>Math.sin(n/i*6.28*e+t)),w=((n,i)=>u?Math.sin(n/44100*i*6.28+b(n,44100,i,0)**2+.75*b(n,44100,i,.25)+.1*b(n,44100,i,.5)):(P=44100/i,r=0,v.length<=1+~~P?(v.push(2*Math.random()-1),v[v.length-1]):(v[p]=.5*(v[p>=v.length-1?0:p+1]+v[p]),p>=~~P&&(p<1+~~P?c%100>=~~(100*(P-~~P))&&(r=1,v[p+1]=.5*(v[0]+v[p+1]),c++):r=1),p=r?0:p+1,v[p]))),D=[],i=0;i<44100*V;i++)D[i]=i<88?i/88.2*w(i,n):(1-(i-88.2)/(44100*(V-.002)))**(u?(.5*Math.log(1e4*n/44100))**2:1)*w(i,n);A=new AudioContext,m=A.createBuffer(1,1e6,44100),m.getChannelData(0).set(D),s=A.createBufferSource(),s.buffer=m,s.connect(A.destination),s.start()}),b.innerHTML="<h1>MiniSynth</h1><p><input type=radio name=U checked id=o>Piano<input type=radio name=U>Guitar<p>Note length: <input id=d value=2 size=1> seconds<p><div id=p>",i=0;i<36;i++)p.innerHTML+=`<div style='width:30px;height:200px;float:left;border:1px solid;cursor:pointer;left:${i/2*37+4}px;${f=130.81*1.06**i,[1,3,6,8,10].includes(i%12)?"background:#000;position:absolute;height:99px":0}'onclick=n(${f})>`
</script>